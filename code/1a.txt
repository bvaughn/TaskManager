package {
	import flash.events.Event;
	import flash.events.IOErrorEvent;
	import flash.events.MouseEvent;
	import flash.media.Sound;
	import flash.media.SoundChannel;
	import flash.net.URLRequest;
	
	import spark.components.Button;
	
	public class SampleController_1_NoTaskManager {
		
		private var _button:Button;
		private var _sound:Sound;
		private var _soundChannel:SoundChannel;
		
		public function SampleController_1_NoTaskManager( button:Button ) {
			_button = button;
			_button.addEventListener( MouseEvent.CLICK, onButtonClick );
		}
		
		private function onButtonClick( event:MouseEvent ):void {
			_button.enabled = false;
			
			_sound = new Sound();
			_sound.addEventListener( Event.COMPLETE, onComplete );
			_sound.addEventListener( IOErrorEvent.IO_ERROR, onIOError );
			_sound.load( new URLRequest( "fake_sound_url" ));
		}
		
		
		private function onIOError( event:IOErrorEvent ):void {
			_sound.removeEventListener( Event.COMPLETE, onComplete );
			_sound.removeEventListener( IOErrorEvent.IO_ERROR, onIOError );
			
			// Handle error
		}
		
		private function onComplete( event:Event ):void {
			_sound.removeEventListener( Event.COMPLETE, onComplete );
			_sound.removeEventListener( IOErrorEvent.IO_ERROR, onIOError );
			
			_soundChannel = _sound.play();
			_soundChannel.addEventListener( Event.SOUND_COMPLETE, onSoundComplete );
		}
		
		private function onSoundComplete( event:Event ):void {
			_soundChannel.removeEventListener( Event.SOUND_COMPLETE, onSoundComplete );
			_soundChannel = null;
			
			_button.enabled = true;
		}
	}
}