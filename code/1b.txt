package {
	import com.rosettastone.library.taskmanager.PlaySoundTask;

	import flash.events.MouseEvent;
	import flash.media.Sound;
	import flash.net.URLRequest;

	import spark.components.Button;

	public class SampleController_1_WithTaskManager {

		private var _button:Button;
		private var _playSoundTask:PlaySoundTask;

		public function SampleController_1_WithTaskManager( button:Button ) {
			_button = button;
			_button.addEventListener( MouseEvent.CLICK, onButtonClick );
		}

		private function onButtonClick( event:MouseEvent ):void {
			_button.enabled = false;

			_playSoundTask =
				new PlaySoundTask(
					new Sound(
						new URLRequest( "fake_sound_url" ) ) );
			_playSoundTask.withCompleteHandler(
				function():void {
					_button.enabled = true;
				});
			_playSoundTask.withErrorHandler(
				function():void {
					// Handle error
				});
			_playSoundTask.run();
		}
	}
}